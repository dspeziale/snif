{% extends "base.html" %}

{% block title %}Network Analysis Dashboard{% endblock %}
{% block page_title %}Network Analysis Dashboard{% endblock %}

{% block breadcrumbs %}
<li class="breadcrumb-item active" aria-current="page">Dashboard</li>
{% endblock %}

{% block extra_css %}
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- ApexCharts -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
{% endblock %}

{% block content %}
<!-- Statistiche principali -->
<div class="row">
  <!-- Host Stats -->
  <div class="col-lg-3 col-6">
    <div class="small-box text-bg-primary">
      <div class="inner">
        <h3>{{ stats.total_hosts }}</h3>
        <p>Total Hosts</p>
      </div>
      <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
      </svg>
      <a href="{{ url_for('network.hosts') }}" class="small-box-footer link-light">
        More info <i class="bi bi-link-45deg"></i>
      </a>
    </div>
  </div>

  <!-- Active Hosts -->
  <div class="col-lg-3 col-6">
    <div class="small-box text-bg-success">
      <div class="inner">
        <h3>{{ stats.active_hosts }}<sup class="fs-5">{{ stats.active_hosts_percent }}%</sup></h3>
        <p>Active Hosts</p>
      </div>
      <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
      <a href="{{ url_for('network.hosts', status='up') }}" class="small-box-footer link-light">
        More info <i class="bi bi-link-45deg"></i>
      </a>
    </div>
  </div>

  <!-- Open Ports -->
  <div class="col-lg-3 col-6">
    <div class="small-box text-bg-warning">
      <div class="inner">
        <h3>{{ stats.open_ports }}</h3>
        <p>Open Ports</p>
      </div>
      <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 17a1 1 0 01-.707-1.707L10.586 12 7.293 8.707A1 1 0 118.707 7.293L13.414 12l-4.707 4.707A1 1 0 018 17z"/>
      </svg>
      <a href="{{ url_for('network.ports', state='open') }}" class="small-box-footer link-dark">
        More info <i class="bi bi-link-45deg"></i>
      </a>
    </div>
  </div>

  <!-- Vulnerabilities -->
  <div class="col-lg-3 col-6">
    <div class="small-box text-bg-danger">
      <div class="inner">
        <h3>{{ stats.total_vulnerabilities }}</h3>
        <p>Vulnerabilities</p>
      </div>
      <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 9a3 3 0 00-3 3m3-3a3 3 0 013 3m-3-3v1m0 4a3 3 0 100-6m0 6a3 3 0 100-6m0 6v1m0-4a3 3 0 100-6"/>
      </svg>
      <a href="{{ url_for('security.vulnerabilities') }}" class="small-box-footer link-light">
        More info <i class="bi bi-link-45deg"></i>
      </a>
    </div>
  </div>
</div>

<!-- Seconda riga di statistiche -->
<div class="row">
  <!-- Critical Vulnerabilities -->
  <div class="col-lg-3 col-6">
    <div class="card text-white bg-danger">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="card-title">{{ stats.critical_vulns }}</h4>
            <p class="card-text">Critical Vulnerabilities</p>
          </div>
          <div>
            <i class="bi bi-exclamation-triangle-fill fa-2x"></i>
          </div>
        </div>
      </div>
      <a href="{{ url_for('security.vulnerabilities', severity='CRITICAL') }}" class="card-footer text-light">
        View Details <i class="bi bi-arrow-right"></i>
      </a>
    </div>
  </div>

  <!-- High Vulnerabilities -->
  <div class="col-lg-3 col-6">
    <div class="card text-white bg-warning">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="card-title">{{ stats.high_vulns }}</h4>
            <p class="card-text">High Vulnerabilities</p>
          </div>
          <div>
            <i class="bi bi-exclamation-triangle fa-2x"></i>
          </div>
        </div>
      </div>
      <a href="{{ url_for('security.vulnerabilities', severity='HIGH') }}" class="card-footer text-light">
        View Details <i class="bi bi-arrow-right"></i>
      </a>
    </div>
  </div>

  <!-- Software Installed -->
  <div class="col-lg-3 col-6">
    <div class="card text-white bg-info">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="card-title">{{ stats.total_software }}</h4>
            <p class="card-text">Software Entries</p>
          </div>
          <div>
            <i class="bi bi-box fa-2x"></i>
          </div>
        </div>
      </div>
      <a href="{{ url_for('system.installed_software') }}" class="card-footer text-light">
        View Details <i class="bi bi-arrow-right"></i>
      </a>
    </div>
  </div>

  <!-- Running Processes -->
  <div class="col-lg-3 col-6">
    <div class="card text-white bg-secondary">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="card-title">{{ stats.total_processes }}</h4>
            <p class="card-text">Running Processes</p>
          </div>
          <div>
            <i class="bi bi-play-circle fa-2x"></i>
          </div>
        </div>
      </div>
      <a href="{{ url_for('system.processes') }}" class="card-footer text-light">
        View Details <i class="bi bi-arrow-right"></i>
      </a>
    </div>
  </div>
</div>

<!-- Contenuto principale -->
<div class="row">
  <!-- Grafici e analytics -->
  <div class="col-lg-8">
    <!-- Recent Scans -->
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-clock-history"></i> Recent Scan Activity
        </h3>
      </div>
      <div class="card-body">
        {% if recent_scans %}
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Scan Date</th>
                <th>Command</th>
                <th>Hosts Scanned</th>
                <th>Hosts Up</th>
                <th>Duration</th>
              </tr>
            </thead>
            <tbody>
              {% for scan in recent_scans %}
              <tr>
                <td>{{ scan.start_time|datetime }}</td>
                <td>
                  <small class="text-muted">{{ scan.command_line[:50] }}{% if scan.command_line|length > 50 %}...{% endif %}</small>
                </td>
                <td>{{ scan.total_hosts or 'N/A' }}</td>
                <td>
                  <span class="badge bg-success">{{ scan.up_hosts or 'N/A' }}</span>
                </td>
                <td>
                  {% if scan.elapsed_time %}
                    {{ "%.1f"|format(scan.elapsed_time / 60) }} min
                  {% else %}
                    N/A
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <div class="alert alert-info">
          <i class="bi bi-info-circle"></i> No scan information available.
        </div>
        {% endif %}
      </div>
      <div class="card-footer">
        <a href="{{ url_for('network.scan_info') }}" class="btn btn-primary btn-sm">
          <i class="bi bi-eye"></i> View All Scans
        </a>
      </div>
    </div>

    <!-- Vulnerability Distribution Chart -->
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-pie-chart"></i> Vulnerability Distribution
        </h3>
      </div>
      <div class="card-body">
        <div id="vulnerabilityChart" style="height: 300px;"></div>
      </div>
    </div>

    <!-- Top Ports Chart -->
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-bar-chart"></i> Most Common Open Ports
        </h3>
      </div>
      <div class="card-body">
        <div id="portsChart" style="height: 300px;"></div>
      </div>
    </div>
  </div>

  <!-- Sidebar con info aggiuntive -->
  <div class="col-lg-4">
    <!-- Most Vulnerable Hosts -->
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-shield-exclamation"></i> Most Vulnerable Hosts
        </h3>
      </div>
      <div class="card-body">
        {% if vulnerable_hosts %}
        <div class="list-group list-group-flush">
          {% for host in vulnerable_hosts %}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong>{{ host.ip_address }}</strong>
              {% if host.hostname %}
              <br><small class="text-muted">{{ host.hostname }}</small>
              {% endif %}
              <br>
              <small>
                <span class="badge bg-danger">{{ host.critical_count }} Critical</span>
                <span class="badge bg-warning">{{ host.high_count }} High</span>
              </small>
            </div>
            <span class="badge bg-primary rounded-pill">{{ host.vuln_count }}</span>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <div class="alert alert-success">
          <i class="bi bi-check-circle"></i> No vulnerabilities detected.
        </div>
        {% endif %}
      </div>
      <div class="card-footer">
        <a href="{{ url_for('security.vulnerabilities_overview') }}" class="btn btn-primary btn-sm">
          <i class="bi bi-eye"></i> View Security Overview
        </a>
      </div>
    </div>

    <!-- Device Types -->
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-diagram-2"></i> Device Types
        </h3>
      </div>
      <div class="card-body">
        {% if device_types %}
        <div class="list-group list-group-flush">
          {% for device in device_types %}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              {% if device.device_type == 'Server' %}
                <i class="bi bi-server text-danger"></i>
              {% elif device.device_type == 'Workstation' %}
                <i class="bi bi-pc-display text-primary"></i>
              {% elif device.device_type == 'Network Device' %}
                <i class="bi bi-router text-warning"></i>
              {% elif device.device_type == 'Printer' %}
                <i class="bi bi-printer text-info"></i>
              {% else %}
                <i class="bi bi-cpu text-secondary"></i>
              {% endif %}
              {{ device.device_type or 'Unknown' }}
            </div>
            <span class="badge bg-primary rounded-pill">{{ device.count }}</span>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <div class="alert alert-info">
          <i class="bi bi-info-circle"></i> No device classification available.
        </div>
        {% endif %}
      </div>
      <div class="card-footer">
        <a href="{{ url_for('devices.classification_overview') }}" class="btn btn-primary btn-sm">
          <i class="bi bi-eye"></i> View Device Analysis
        </a>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-lightning"></i> Quick Actions
        </h3>
      </div>
      <div class="card-body">
        <div class="d-grid gap-2">
          <a href="{{ url_for('network.overview') }}" class="btn btn-outline-primary">
            <i class="bi bi-diagram-3"></i> Network Overview
          </a>
          <a href="{{ url_for('security.vulnerabilities_overview') }}" class="btn btn-outline-danger">
            <i class="bi bi-shield-exclamation"></i> Security Analysis
          </a>
          <a href="{{ url_for('devices.classification_overview') }}" class="btn btn-outline-info">
            <i class="bi bi-diagram-2"></i> Device Classification
          </a>
          <a href="{{ url_for('reports.executive_summary') }}" class="btn btn-outline-success">
            <i class="bi bi-file-earmark-text"></i> Generate Report
          </a>
        </div>
      </div>
    </div>

    <!-- System Status -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <i class="bi bi-info-circle"></i> System Status
        </h3>
      </div>
      <div class="card-body">
        <div class="row text-center">
          <div class="col-6">
            <div class="border-end">
              <h5 class="mb-1">{{ stats.total_hosts }}</h5>
              <small class="text-muted">Total Hosts</small>
            </div>
          </div>
          <div class="col-6">
            <h5 class="mb-1">{{ stats.active_hosts_percent }}%</h5>
            <small class="text-muted">Active Rate</small>
          </div>
        </div>
        <hr>
        <div class="row text-center">
          <div class="col-6">
            <div class="border-end">
              <h5 class="mb-1 text-danger">{{ stats.critical_vulns }}</h5>
              <small class="text-muted">Critical</small>
            </div>
          </div>
          <div class="col-6">
            <h5 class="mb-1 text-warning">{{ stats.high_vulns }}</h5>
            <small class="text-muted">High Risk</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Vulnerability Distribution Chart
    const vulnerabilityData = {
        critical: {{ stats.critical_vulns }},
        high: {{ stats.high_vulns }},
        medium: {{ stats.total_vulnerabilities - stats.critical_vulns - stats.high_vulns }},
        total: {{ stats.total_vulnerabilities }}
    };

    if (vulnerabilityData.total > 0) {
        const vulnOptions = {
            series: [vulnerabilityData.critical, vulnerabilityData.high, vulnerabilityData.medium],
            chart: {
                type: 'donut',
                height: 300
            },
            labels: ['Critical', 'High', 'Medium/Low'],
            colors: ['#dc3545', '#fd7e14', '#ffc107'],
            legend: {
                position: 'bottom'
            },
            dataLabels: {
                enabled: true,
                formatter: function (val) {
                    return Math.round(val) + "%"
                }
            },
            plotOptions: {
                pie: {
                    donut: {
                        size: '60%'
                    }
                }
            }
        };

        const vulnChart = new ApexCharts(document.querySelector("#vulnerabilityChart"), vulnOptions);
        vulnChart.render();
    } else {
        document.querySelector("#vulnerabilityChart").innerHTML = '<div class="alert alert-success text-center"><i class="bi bi-check-circle"></i> No vulnerabilities detected</div>';
    }

    // Top Ports Chart
    const portsData = [
        {% for port in top_ports %}
        {
            port: "{{ port[0] }}",
            count: {{ port[1] }}
        }{{ "," if not loop.last }}
        {% endfor %}
    ];

    if (portsData.length > 0) {
        const portsOptions = {
            series: [{
                name: 'Open Hosts',
                data: portsData.map(p => p.count)
            }],
            chart: {
                type: 'bar',
                height: 300
            },
            xaxis: {
                categories: portsData.map(p => `Port ${p.port}`)
            },
            colors: ['#17a2b8'],
            dataLabels: {
                enabled: true
            },
            title: {
                text: 'Most Common Open Ports',
                align: 'center'
            }
        };

        const portsChart = new ApexCharts(document.querySelector("#portsChart"), portsOptions);
        portsChart.render();
    } else {
        document.querySelector("#portsChart").innerHTML = '<div class="alert alert-info text-center"><i class="bi bi-info-circle"></i> No port data available</div>';
    }

    // Auto-refresh stats ogni 5 minuti
    setInterval(function() {
        fetch('/api/stats')
            .then(response => response.json())
            .then(data => {
                // Aggiorna le statistiche se necessario
                console.log('Stats refreshed:', data);
            })
            .catch(error => {
                console.error('Error refreshing stats:', error);
            });
    }, 300000); // 5 minuti

    // Animazioni per le card statistiche
    function animateCounters() {
        const counters = document.querySelectorAll('.small-box h3, .card-title');

        counters.forEach(counter => {
            const target = parseInt(counter.textContent.replace(/[^\d]/g, ''));
            if (target && target > 0) {
                let current = 0;
                const increment = target / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    counter.textContent = Math.floor(current);
                }, 30);
            }
        });
    }

    // Avvia animazioni dopo un breve delay
    setTimeout(animateCounters, 500);

    // Toast notifications per azioni rapide
    function showToast(message, type = 'info') {
        const toastHtml = `
            <div class="toast align-items-center text-bg-${type} border-0" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body">
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            </div>
        `;

        // Crea container toast se non esiste
        let toastContainer = document.querySelector('.toast-container');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';
            document.body.appendChild(toastContainer);
        }

        // Aggiungi toast
        toastContainer.insertAdjacentHTML('beforeend', toastHtml);

        // Mostra toast
        const toastElement = toastContainer.lastElementChild;
        const toast = new bootstrap.Toast(toastElement);
        toast.show();

        // Rimuovi dopo che è nascosto
        toastElement.addEventListener('hidden.bs.toast', () => {
            toastElement.remove();
        });
    }

    // Aggiungi listener per quick actions
    document.querySelectorAll('.btn[href]').forEach(btn => {
        btn.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href.includes('overview') || href.includes('analysis')) {
                showToast('Loading analysis...', 'info');
            }
        });
    });

    // Carica dati aggiuntivi in background
    Promise.all([
        fetch('/api/health'),
        fetch('/network/api/stats'),
        fetch('/security/api/security-stats')
    ]).then(responses => {
        return Promise.all(responses.map(r => r.json()));
    }).then(([health, networkStats, securityStats]) => {
        console.log('Dashboard data loaded:', { health, networkStats, securityStats });

        // Aggiorna indicatori di stato se necessario
        if (health.status === 'healthy') {
            // Aggiungi indicatore verde da qualche parte
            const statusIndicator = document.createElement('div');
            statusIndicator.className = 'position-fixed bottom-0 end-0 p-3';
            statusIndicator.innerHTML = `
                <div class="badge bg-success">
                    <i class="bi bi-check-circle"></i> System Healthy
                </div>
            `;
            document.body.appendChild(statusIndicator);

            // Rimuovi dopo 3 secondi
            setTimeout(() => statusIndicator.remove(), 3000);
        }
    }).catch(error => {
        console.error('Error loading dashboard data:', error);
        showToast('Some dashboard data may be incomplete', 'warning');
    });

    // Gestione errori immagini (se ci sono)
    document.querySelectorAll('img').forEach(img => {
        img.addEventListener('error', function() {
            this.style.display = 'none';
        });
    });

    // Smooth scroll per anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        // Ctrl/Cmd + K per focus su search (se implementato)
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            const searchInput = document.querySelector('input[type="search"]');
            if (searchInput) {
                searchInput.focus();
            }
        }

        // Escape per chiudere modali/dropdown aperti
        if (e.key === 'Escape') {
            const openDropdowns = document.querySelectorAll('.dropdown-menu.show');
            openDropdowns.forEach(dropdown => {
                const toggle = dropdown.previousElementSibling;
                if (toggle) {
                    bootstrap.Dropdown.getInstance(toggle)?.hide();
                }
            });
        }
    });

    // Performance monitoring
    if ('performance' in window) {
        window.addEventListener('load', function() {
            setTimeout(function() {
                const perfData = performance.getEntriesByType('navigation')[0];
                if (perfData) {
                    const loadTime = perfData.loadEventEnd - perfData.loadEventStart;
                    console.log(`Dashboard loaded in ${loadTime}ms`);

                    // Se il caricamento è lento, mostra suggerimento
                    if (loadTime > 3000) {
                        showToast('Dashboard loaded. Consider clearing browser cache for better performance.', 'info');
                    }
                }
            }, 1000);
        });
    }

    // Utility function per formattare numeri
    window.formatNumber = function(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        }
        return num.toString();
    };

    // Aggiungi tooltips a elementi con title
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"], [title]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
});

// Funzione globale per refresh manual del dashboard
window.refreshDashboard = function() {
    showToast('Refreshing dashboard...', 'info');
    setTimeout(() => {
        window.location.reload();
    }, 1000);
};

// Service Worker registration per caching (opzionale)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js')
            .then(function(registration) {
                console.log('ServiceWorker registration successful');
            })
            .catch(function(err) {
                console.log('ServiceWorker registration failed');
            });
    });
}
</script>

<!-- Custom CSS per miglioramenti visual -->
<style>
/* Animazioni smooth per le card */
.small-box, .card {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.small-box:hover, .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

/* Indicatori di caricamento */
.loading {
    opacity: 0.7;
    pointer-events: none;
}

.loading::after {
    content: '';
    display: block;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid #f3f3f3;
    border-top: 2px solid #007bff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Miglioramenti per mobile */
@media (max-width: 768px) {
    .small-box h3 {
        font-size: 1.5rem;
    }

    .card-title {
        font-size: 1.1rem;
    }

    .btn {
        font-size: 0.9rem;
    }
}

/* Custom badge styles */
.badge.bg-danger { background-color: #dc3545 !important; }
.badge.bg-warning { background-color: #fd7e14 !important; }
.badge.bg-info { background-color: #17a2b8 !important; }
.badge.bg-success { background-color: #28a745 !important; }

/* Progress bars per percentuali */
.progress-mini {
    height: 4px;
    margin-top: 5px;
}

/* Status indicators */
.status-indicator {
    position: relative;
}

.status-indicator::before {
    content: '';
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #28a745;
    border: 2px solid white;
    z-index: 1;
}

.status-indicator.offline::before {
    background-color: #dc3545;
}

.status-indicator.warning::before {
    background-color: #ffc107;
}

/* Chart containers */
#vulnerabilityChart, #portsChart {
    min-height: 300px;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .card {
        background-color: #2d3748;
        border-color: #4a5568;
    }

    .text-muted {
        color: #a0aec0 !important;
    }
}

/* Print styles */
@media print {
    .small-box-footer,
    .card-footer,
    .btn,
    .navbar,
    .sidebar {
        display: none !important;
    }

    .card {
        page-break-inside: avoid;
        margin-bottom: 1rem;
    }
}
</style>
{% endblock %}